<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="manymome">
<title>Generate Monte Carlo Estimates • manymome</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Hind-0.4.6/font.css" rel="stylesheet">
<link href="../deps/Oxygen_Mono-0.4.6/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Monte Carlo Estimates">
<meta property="og:description" content="manymome">
<meta property="og:image" content="https://sfcheung.github.io/manymome/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">manymome</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9.15</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/manymome.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>&lt;Structural Equation Models&gt;</h6>
    <a class="dropdown-item" href="../articles/manymome.html">Moderation, Mediation, Moderated Mediation in Path Models</a>
    <a class="dropdown-item" href="../articles/med_lav.html">Mediation among Latent Variables</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Multiple Regression&gt;</h6>
    <a class="dropdown-item" href="../articles/med_lm.html">Mediation</a>
    <a class="dropdown-item" href="../articles/mome_lm.html">Moderated Mediation</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Multiple Imputation&gt;</h6>
    <a class="dropdown-item" href="../articles/do_mc_lavaan_mi.html">Monte Carlo Confidence Intervals with Multiple Imputation</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Helpers&gt;</h6>
    <a class="dropdown-item" href="../articles/do_boot.html">Generate Bootstrap Estimates</a>
    <a class="dropdown-item" href="../articles/do_mc.html">Generate Monte Carlo Estimates</a>
    <a class="dropdown-item" href="../articles/mod_levels.html">Set Moderator Levels</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Technical Appendices&gt;</h6>
    <a class="dropdown-item" href="../articles/get_prod.html">Workflow of `get_prod()` and Friends</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/manymome/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Monte Carlo Estimates</h1>
                        <h4 data-toc-skip class="author">Shu Fai Cheung
&amp; Sing-Hang Cheung</h4>
            
            <h4 data-toc-skip class="date">2023-05-03</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/manymome/blob/HEAD/vignettes/do_mc.Rmd" class="external-link"><code>vignettes/do_mc.Rmd</code></a></small>
      <div class="d-none name"><code>do_mc.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article is a brief illustration of how to use
<code><a href="../reference/do_mc.html">do_mc()</a></code> from the package <a href="https://sfcheung.github.io/manymome/index.html">manymome</a> to
generate Monte Carlo estimates for <code><a href="../reference/cond_indirect.html">indirect_effect()</a></code> and
<code><a href="../reference/cond_indirect.html">cond_indirect_effects()</a></code> to form Monte Carlo confidence
intervals.</p>
<p>Although <code><a href="../reference/cond_indirect.html">indirect_effect()</a></code> and
<code><a href="../reference/cond_indirect.html">cond_indirect_effects()</a></code> can also be used to generate Monte
Carlo estimates when they are called (see
<code><a href="../articles/manymome.html">vignette("manymome")</a></code>), there may be situations in which
users prefer generating the Monte Carlo estimates first before calling
<code><a href="../reference/cond_indirect.html">indirect_effect()</a></code> and <code><a href="../reference/cond_indirect.html">cond_indirect_effects()</a></code>.
<code><a href="../reference/do_mc.html">do_mc()</a></code> is for this purpose.</p>
<p>Monte Carlo confidence intervals only support models fitted by
<code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code> and (since version 0.1.9.8)
<code><a href="https://rdrr.io/pkg/semTools/man/runMI.html" class="external-link">semTools::sem.mi()</a></code> or <code><a href="https://rdrr.io/pkg/semTools/man/runMI.html" class="external-link">semTools::runMI()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="how-it-works">How It Works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>The function <code><a href="../reference/do_mc.html">do_mc()</a></code> retrieves the variance-covariance
matrix of the parameter estimates and then generates a number of sets of
simulated sample estimates using a multivariate normal distribution.
Other parameters and implied variances, covariances, and means of
variables are then generated from these simulated estimates.</p>
<p>When a <span class="math inline">\((1 - \alpha)\)</span>% Monte Carlo
confidence interval is requested, the <span class="math inline">\(100(\alpha/2)\)</span><sup>th</sup> percentile and
the <span class="math inline">\(100(1 - \alpha/2)\)</span><sup>th</sup>
percentile are used to form the confidence interval. For a 95% Monte
Carlo confidence interval, the 2.5<sup>th</sup> percentile and
97.5<sup>th</sup> percentile will be used.</p>
</div>
<div class="section level2">
<h2 id="the-workflow">The Workflow<a class="anchor" aria-label="anchor" href="#the-workflow"></a>
</h2>
<p>The following workflow will be demonstrated;</p>
<ol style="list-style-type: decimal">
<li><p>Fit the model as usual.</p></li>
<li><p>Use <code><a href="../reference/do_mc.html">do_mc()</a></code> to generate the Monte Carlo
estimates.</p></li>
<li><p>Call other functions (e.g, <code><a href="../reference/cond_indirect.html">indirect_effect()</a></code> and
<code><a href="../reference/cond_indirect.html">cond_indirect_effects()</a></code>) to compute the desired effects and
form Monte Carlo confidence intervals.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="demonstration">Demonstration<a class="anchor" aria-label="anchor" href="#demonstration"></a>
</h2>
<div class="section level3">
<h3 id="fit-a-model-by-lavaansem">Fit a Model by <code>lavaan::sem()</code><a class="anchor" aria-label="anchor" href="#fit-a-model-by-lavaansem"></a>
</h3>
<p>The data set for illustration:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/manymome/">manymome</a></span><span class="op">)</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">data_med</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co">#&gt;           x        m        y       c1       c2</span></span>
<span><span class="co">#&gt; 1  9.931992 17.89644 20.73893 1.426513 6.103290</span></span>
<span><span class="co">#&gt; 2  8.331493 17.92150 22.91594 2.940388 3.832698</span></span>
<span><span class="co">#&gt; 3 10.327471 17.83178 22.14201 3.012678 5.770532</span></span>
<span><span class="co">#&gt; 4 11.196969 20.01750 25.05038 3.120056 4.654931</span></span>
<span><span class="co">#&gt; 5 11.887811 22.08645 28.47312 4.440018 3.959033</span></span>
<span><span class="co">#&gt; 6  8.198297 16.95198 20.73549 2.495083 3.763712</span></span></code></pre></div>
<p>It has one predictor (<code>x</code>), one mediator (<code>m</code>),
one outcome variable (<code>y</code>), and two control variables
(<code>c1</code> and <code>c2</code>).</p>
<p>The following simple mediation model with two control variables
(<code>c1</code> and <code>c2</code>) will be fitted:</p>
<div class="figure">
<img src="do_mc_draw_model-1.png" alt=""><p class="caption">plot of chunk do_mc_draw_model</p>
</div>
<p>Fit the model by <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span></span>
<span><span class="st">"</span></span>
<span><span class="st">m ~ x + c1 + c2</span></span>
<span><span class="st">y ~ m + x + c1 + c2</span></span>
<span><span class="st">"</span></span>
<span><span class="va">fit_lavaan</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">mod</span>, data <span class="op">=</span> <span class="va">dat</span>,</span>
<span>                  fixed.x <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                  estimator <span class="op">=</span> <span class="st">"MLR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit_lavaan</span><span class="op">)</span></span>
<span><span class="co">#&gt; lavaan 0.6.15 ended normally after 1 iteration</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Estimator                                         ML</span></span>
<span><span class="co">#&gt;   Optimization method                           NLMINB</span></span>
<span><span class="co">#&gt;   Number of model parameters                        15</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Number of observations                           100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Model Test User Model:</span></span>
<span><span class="co">#&gt;                                               Standard      Scaled</span></span>
<span><span class="co">#&gt;   Test Statistic                                 0.000       0.000</span></span>
<span><span class="co">#&gt;   Degrees of freedom                                 0           0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Parameter Estimates:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Standard errors                             Sandwich</span></span>
<span><span class="co">#&gt;   Information bread                           Observed</span></span>
<span><span class="co">#&gt;   Observed information based on                Hessian</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Regressions:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;   m ~                                                 </span></span>
<span><span class="co">#&gt;     x                 0.935    0.075   12.437    0.000</span></span>
<span><span class="co">#&gt;     c1                0.198    0.079    2.507    0.012</span></span>
<span><span class="co">#&gt;     c2               -0.168    0.099   -1.703    0.089</span></span>
<span><span class="co">#&gt;   y ~                                                 </span></span>
<span><span class="co">#&gt;     m                 0.785    0.233    3.363    0.001</span></span>
<span><span class="co">#&gt;     x                 0.508    0.323    1.573    0.116</span></span>
<span><span class="co">#&gt;     c1                0.140    0.188    0.747    0.455</span></span>
<span><span class="co">#&gt;     c2               -0.154    0.214   -0.720    0.471</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Covariances:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;   x ~~                                                </span></span>
<span><span class="co">#&gt;     c1                0.026    0.121    0.211    0.833</span></span>
<span><span class="co">#&gt;     c2                0.100    0.084    1.186    0.235</span></span>
<span><span class="co">#&gt;   c1 ~~                                               </span></span>
<span><span class="co">#&gt;     c2               -0.092    0.109   -0.841    0.400</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Variances:</span></span>
<span><span class="co">#&gt;                    Estimate  Std.Err  z-value  P(&gt;|z|)</span></span>
<span><span class="co">#&gt;    .m                 0.681    0.085    7.976    0.000</span></span>
<span><span class="co">#&gt;    .y                 4.030    0.580    6.944    0.000</span></span>
<span><span class="co">#&gt;     x                 1.102    0.150    7.338    0.000</span></span>
<span><span class="co">#&gt;     c1                1.218    0.161    7.540    0.000</span></span>
<span><span class="co">#&gt;     c2                0.685    0.073    9.340    0.000</span></span></code></pre></div>
<p>Suppose we would like to use robust “sandwich” standard errors and
confidence intervals provided by MLR for the free parameters, but want
to use Monte Carlo confidence interval for the indirect effect. In the
call above, we used <code>estimator = "MLR"</code> and did not set
<code>se = "boot"</code>.</p>
</div>
<div class="section level3">
<h3 id="generate-monte-carlo-estimates">Generate Monte Carlo Estimates<a class="anchor" aria-label="anchor" href="#generate-monte-carlo-estimates"></a>
</h3>
<p>We can then call <code><a href="../reference/do_mc.html">do_mc()</a></code> on the output of
<code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code> to generate the Monte Carlo estimates of all
free parameters <em>and</em> the implied statistics, such as the
variances of <code>m</code> and <code>y</code>, which are not free
parameters but are needed to form the confidence interval of the
<em>standardized</em> indirect effect.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_out_lavaan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/do_mc.html">do_mc</a></span><span class="op">(</span>fit <span class="op">=</span> <span class="va">fit_lavaan</span>,</span>
<span>                       R <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>                       seed <span class="op">=</span> <span class="fl">4234</span><span class="op">)</span></span>
<span><span class="co">#&gt; Stage 1: Simulate estimates</span></span>
<span><span class="co">#&gt; Stage 2: Compute implied statistics</span></span></code></pre></div>
<p>Usually, just three arguments are needed:</p>
<ul>
<li><p><code>fit</code>: The output of
<code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>.</p></li>
<li><p><code>R</code>: The number of Monte Carlo replications. Should be
at least 10000 in real research.</p></li>
<li><p><code>seed</code>: The seed for the random number generator. To
be used by <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code>. It is recommended to set this
argument such that the results are reproducible.</p></li>
</ul>
<p>Parallel processing is not used. However, the time taken is rarely
long because there is no need to refit the model many times.</p>
</div>
<div class="section level3">
<h3 id="using-the-output-of-do_mc-in-other-functions-of-manymome">Using the Output of <code>do_mc()</code> in Other Functions of
<code>manymome</code><a class="anchor" aria-label="anchor" href="#using-the-output-of-do_mc-in-other-functions-of-manymome"></a>
</h3>
<p>When calling <code><a href="../reference/cond_indirect.html">indirect_effect()</a></code> or
<code><a href="../reference/cond_indirect.html">cond_indirect_effects()</a></code>, the argument <code>mc_out</code>
can be assigned the output of <code><a href="../reference/do_mc.html">do_mc()</a></code>. They will then
retrieve the stored simulated estimates to form the Monte Carlo
confidence intervals, if requested.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out_lavaan</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cond_indirect.html">indirect_effect</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"x"</span>,</span>
<span>                              y <span class="op">=</span> <span class="st">"y"</span>,</span>
<span>                              m <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>                              fit <span class="op">=</span> <span class="va">fit_lavaan</span>,</span>
<span>                              mc_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              mc_out <span class="op">=</span> <span class="va">mc_out_lavaan</span><span class="op">)</span></span>
<span><span class="va">out_lavaan</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; == Indirect Effect ==</span></span>
<span><span class="co">#&gt;                                        </span></span>
<span><span class="co">#&gt;  Path:                 x -&gt; m -&gt; y     </span></span>
<span><span class="co">#&gt;  Indirect Effect       0.733           </span></span>
<span><span class="co">#&gt;  95.0% Monte Carlo CI: [0.306 to 1.174]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Computation Formula:</span></span>
<span><span class="co">#&gt;   (b.m~x)*(b.y~m)</span></span>
<span><span class="co">#&gt; Computation:</span></span>
<span><span class="co">#&gt;   (0.93469)*(0.78469)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Monte Carlo confidence interval with 10000 replications.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients of Component Paths:</span></span>
<span><span class="co">#&gt;  Path Coefficient</span></span>
<span><span class="co">#&gt;   m~x       0.935</span></span>
<span><span class="co">#&gt;   y~m       0.785</span></span></code></pre></div>
<p>Reusing the simulated estimates can ensure that all analyses with
Monte Carlo confidence intervals are based on the same set of simulated
estimates, without the need to generate these estimates again.</p>
</div>
</div>
<div class="section level2">
<h2 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h2>
<p>Monte Carlo confidence intervals can be formed when the
variance-covariance matrix of the parameter estimates can be retrieved.
Therefore, <code><a href="../reference/do_mc.html">do_mc()</a></code> can be used when missing data is handled
by full information maximum likelihood in <code>lavaan</code> using
<code>missing = "fiml"</code>. It also supports multiple imputation if
<code><a href="https://rdrr.io/pkg/semTools/man/runMI.html" class="external-link">semTools::sem.mi()</a></code> or <code><a href="https://rdrr.io/pkg/semTools/man/runMI.html" class="external-link">semTools::runMI()</a></code> (since
version 0.1.9.8). See <code><a href="../articles/do_mc_lavaan_mi.html">vignette("do_mc_lavaan_mi")</a></code> for an
illustration.</p>
</div>
<div class="section level2">
<h2 id="the-structure-of-the-output">The Structure of the Output<a class="anchor" aria-label="anchor" href="#the-structure-of-the-output"></a>
</h2>
<p>The output of <code><a href="../reference/do_mc.html">do_mc()</a></code> in this case is an object of the
class <code>mc_out</code>, which is a list of <code>R</code> lists, each
with two elements: <code>est</code> and <code>implied_stats</code>.</p>
<p>This is the content of <code>est</code> of the first list:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_out_lavaan</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">est</span></span>
<span><span class="co">#&gt;    lhs op rhs    est</span></span>
<span><span class="co">#&gt; 1    m  ~   x  0.860</span></span>
<span><span class="co">#&gt; 2    m  ~  c1  0.160</span></span>
<span><span class="co">#&gt; 3    m  ~  c2 -0.086</span></span>
<span><span class="co">#&gt; 4    y  ~   m  0.567</span></span>
<span><span class="co">#&gt; 5    y  ~   x  0.881</span></span>
<span><span class="co">#&gt; 6    y  ~  c1  0.008</span></span>
<span><span class="co">#&gt; 7    y  ~  c2  0.117</span></span>
<span><span class="co">#&gt; 8    m ~~   m  0.619</span></span>
<span><span class="co">#&gt; 9    y ~~   y  3.431</span></span>
<span><span class="co">#&gt; 10   x ~~   x  1.061</span></span>
<span><span class="co">#&gt; 11   x ~~  c1 -0.113</span></span>
<span><span class="co">#&gt; 12   x ~~  c2  0.099</span></span>
<span><span class="co">#&gt; 13  c1 ~~  c1  1.190</span></span>
<span><span class="co">#&gt; 14  c1 ~~  c2 -0.243</span></span>
<span><span class="co">#&gt; 15  c2 ~~  c2  0.724</span></span></code></pre></div>
<p>The content is just the first four columns of the output of
<code><a href="https://rdrr.io/pkg/lavaan/man/parameterEstimates.html" class="external-link">lavaan::parameterEstimates()</a></code>. Note that only fixed and free
parameters are used so other rows, if any, are not used even if
present.</p>
<p>This is the content of <code>implied_stats</code> of the first
list:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mc_out_lavaan</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">implied_stats</span></span>
<span><span class="co">#&gt; $cov</span></span>
<span><span class="co">#&gt;         m      y      x     c1     c2</span></span>
<span><span class="co">#&gt; m   1.401                            </span></span>
<span><span class="co">#&gt; y   1.575  5.619                     </span></span>
<span><span class="co">#&gt; x   0.886  1.448  1.061              </span></span>
<span><span class="co">#&gt; c1  0.114 -0.053 -0.113  1.190       </span></span>
<span><span class="co">#&gt; c2 -0.016  0.161  0.099 -0.243  0.724</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $mean</span></span>
<span><span class="co">#&gt;  m  y  x c1 c2 </span></span>
<span><span class="co">#&gt; NA NA NA NA NA</span></span></code></pre></div>
<p>It has three elements. <code>cov</code> is the implied variances and
covariances of all variables. If a model has latent variables, they will
be included too. The other elements, <code>mean</code> and
<code>mean_lv</code>, are the implied means of the observed variables
and the latent variables (if any), respectively. The elements are
<code>NA</code> if mean structure is not in the fitted model.</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>Monte Carlo confidence intervals require the variance-covariance
matrix of all free parameters. Therefore, only models fitted by
<code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code> and (since 0.1.9.8)
<code><a href="https://rdrr.io/pkg/semTools/man/runMI.html" class="external-link">semTools::sem.mi()</a></code> or <code><a href="https://rdrr.io/pkg/semTools/man/runMI.html" class="external-link">semTools::runMI()</a></code> are
supported. Models fitted by <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code> do not have a
variance-covariance matrix for the regression coefficients from two or
more regression models and so are not supported by
<code><a href="../reference/do_mc.html">do_mc()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="further-information">Further Information<a class="anchor" aria-label="anchor" href="#further-information"></a>
</h2>
<p>For further information on <code><a href="../reference/do_mc.html">do_mc()</a></code>, please refer to its
help page.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Shu Fai Cheung, Sing-Hang Cheung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
